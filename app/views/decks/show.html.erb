<div class="pure-g">
  <div class="pure-u-1 pure-u-md-1">
    <h1><%= @deck.name %></h1>
    <h2><%= @deck.description %></h2>
    <h3>main: <%= User.first.percent_from(@deck.main_ids) %>%</h3>
    <h3>sideboard: <%= User.first.percent_from(@deck.sideboard_ids) %>%</h3>
  </div>
  <div class="pure-u-md-1-3">
    <canvas id="manacost_chart"></canvas>
  </div>
  <div class="pure-u-md-1-3">
    <canvas id="type_chart"></canvas>
  </div>
  <div class="pure-u-md-1-3">
    <canvas id="color_chart"></canvas>
  </div>
</div>

<%= render 'deck_box', deck: @deck %>

<%= link_to 'Back', decks_path %>
<script>
  var data = {
    labels: <%= DeckStats.new(@deck.for_game(:main)).by_manacost.keys.sort %>,  
    datasets: [
    { data: <%= DeckStats.new(@deck.for_game(:main)).total_by_manacost.values %> }
    ]
  };
  var ctx = document.getElementById("manacost_chart").getContext("2d");
  var myNewChart = new Chart(ctx).Bar(data);

  var data2 = {
    labels: <%= raw DeckStats.new(@deck.for_game(:main)).total_by_type.keys.map {|i| i[0]} %>,  
    datasets: [
    { data: <%= DeckStats.new(@deck.for_game(:main)).total_by_type.values %> }
    ]
  };
  var ctx2 = document.getElementById("type_chart").getContext("2d");
  var myNewChart2 = new Chart(ctx2).Bar(data2);


  var data3 = {
    labels: <%= raw DeckStats.new(@deck.for_game(:main)).total_by_color.keys.map {|i| i[0]}.map(&:capitalize) %>,  
    datasets: [
    { data: <%= DeckStats.new(@deck.for_game(:main)).total_by_color.values %> }
    ]
  };
  var ctx3 = document.getElementById("color_chart").getContext("2d");
  var myNewChart3 = new Chart(ctx3).Bar(data3);
</script>
